
<!-- KLARNA BOX -->
{{setup.threatmetrix}}
<script type="text/javascript">
 <!--
window.klarna_global = {
    eid: '{{setup.eid}}',
    countryCode: '{{setup.countryCode}}',
    flag: '{{setup.flag}}',
    sum: '{{setup.sum}}',
    pid: '{{setup.payment_id}}',
    unary_checkout: '{{setup.unary_checkout}}',
    ajax_path: '{{setup.ajax_path}}',
    gender: '{{value.gender}}',
    lang_companyNotAllowed: '{{lang.company_not_allowed}}',
    invoice_name: '{{setup.invoice_name}}',
    part_name: '{{setup.part_name}}',
    spec_name: '{{setup.spec_name}}'
};

if ((typeof window.klarna_red_baloon_content == "undefined")
    || (window.klarna_red_baloon_content == "")
) {
    window.klarna_red_baloon_content = '{{setup.red_baloon_content}}';
    window.klarna_red_baloon_box = '{{setup.red_baloon_paymentBox}}';
}
window.klarna_invoice = {
    params: {
        companyName: '{{input.companyName}}',
        socialNumber: '{{input.socialNumber}}',
        firstName: '{{input.firstName}}',
        lastName: '{{input.lastName}}',
        gender: '{{input.gender}}',
        street: '{{input.street}}',
        homenumber: '{{input.homenumber}}',
        house_extension: '{{input.house_extension}}',
        city: '{{input.city}}',
        zipcode: '{{input.zipcode}}',
        reference: '{{input.reference}}',
        phoneNumber: '{{input.phoneNumber}}',
        emailAddress: '{{input.emailAddress}}',
        invoiceType: '{{input.invoiceType}}',
        shipmentAddressInput: '{{input.shipmentAddressInput}}',
        birth_day: '{{input.birth_day}}',
        birth_month: '{{input.birth_month}}',
        birth_year: '{{input.birth_year}}',
        paymentPlan: '{{input.paymentPlan}}'
    },
    language: '{{setup.langISO}}',
    select_bday: '{{value.birth_day}}',
    select_bmonth: '{{value.birth_month}}',
    select_byear: '{{value.birth_year}}',
    lang_personNum: '{{lang.person_number}}',
    lang_orgNum: '{{lang.organisation_number}}',
    fee: '{{setup.fee}}'
};

if (typeof klarna != "undefined") {
    klarna.invoice = new KlarnaPaymentOption(klarna_invoice);
    klarna.global = new KlarnaGlobalContext(klarna_global);
}

if(typeof klarnaGeneralLoaded == 'undefined') {
    document.write('<scr'+'ipt src="{{setup.path_js}}checkout/klarnaGeneral.js" type="text/javascript"></scr'+'ipt>');
}

if(typeof klarnaAgreementLoaded == 'undefined') {
    document.write('<scr'+'ipt src="http://static.klarna.com/external/js/klarnaConsentNew.js" type="text/javascript"></scr'+'ipt>');
    klarnaAgreementLoaded = true;
}

jQuery('head').append('<link type="text/css" rel="stylesheet" href="{{setup.path_css}}checkout/style.css" />');
//-->
</script>
<div class="klarna_baloon" id="klarna_baloon" style="display: none">
    <div class="klarna_baloon_top"></div>
    <div class="klarna_baloon_middle" id="klarna_baloon_content">
        <div></div>
    </div>
    <div class="klarna_baloon_bottom"></div>
</div>
<div class="klarna_blue_baloon" id="klarna_blue_baloon"
    style="display: none">
    <div class="klarna_blue_baloon_top"></div>
    <div class="klarna_blue_baloon_middle" id="klarna_blue_baloon_content">
        <div></div>
    </div>
    <div class="klarna_blue_baloon_bottom"></div>
</div>
<div class="klarna_box_container">
    <div class="klarna_box" id="klarna_box_invoice">
        <script type="text/javascript">
            jQuery(document).ready(function() {
                if (typeof klarnaAgreementLoaded != 'undefined') {
                    openAgreement('{{setup.countryCode}}');
                }
            });
        </script>
        <div class="klarna_box_top">
            <div id="klarna_box_invoice_top_right" class="klarna_box_top_right">
                <div class="klarna_box_top_flag">
                    <div class="box_active_language">
                        <img src="{{setup.path_img}}checkout/flags/{{setup.langISO}}.png"
                            alt="{{setup.langISOName}}" /> <img
                            src="{{setup.path_img}}checkout/arrow_down.gif" alt=""
                            style="float: right; padding: 6px 2px 0 0; margin: 0" />
                    </div>
                    <div class="klarna_box_top_flag_list">
                        <img src="{{setup.path_img}}checkout/flags/en.png" alt="en" />
                        <img src="{{setup.path_img}}checkout/flags/da.png" alt="da" />
                        <img src="{{setup.path_img}}checkout/flags/de.png" alt="de" />
                        <img src="{{setup.path_img}}checkout/flags/fi.png" alt="fi" />
                        <img src="{{setup.path_img}}checkout/flags/nl.png" alt="nl" />
                        <img src="{{setup.path_img}}checkout/flags/nb.png" alt="nb" />
                        <img src="{{setup.path_img}}checkout/flags/sv.png" alt="sv" />
                    </div>
                </div>
                <div class="klarna_box_top_agreement">
                    <a href="javascript:ShowKlarnaPopup('{{setup.eid}}', '{{setup.fee}}','invoice')">
                        {{lang.klarna_invoice_agreement}} </a>
                </div>
                <div class="klarna_box_bottom_languageInfo">
                    <img src="{{setup.path_img}}checkout/notice.png"
                        alt="{{lang.languageSetting_note_se}}" />
                </div>
            </div>
            <img
                src="//cdn.klarna.com/public/images/SE/logos/v1/invoice/SE_invoice_logo_std_blue-black.png?width=151&height=44&eid={{setup.eid}}"
                id="klarna_logo_invoice"
                class="klarna_logo" />
        </div>
        <div class="klarna_box_bottom">
            <div class="klarna_box_bottom_contents">
                <div class="klarna_box_bottom_right">
                    <div class="klarna_box_bottom_content">
                        <div class="klarna_box_bottom_title">{{lang.socialSecurityNumber}}</div>
                        <div class="klarna_box_bottom_content_loader">
                            <img src="{{setup.path_img}}checkout/loader1.gif" alt="" />
                        </div>
                        <input type="text" alt="{{lang.notice_socialNumber_se}}"
                            name="{{input.socialNumber}}" value="{{value.socialNumber}}"
                            class="Klarna_pnoInputField klarna-validate-text" />
                        <div class="referenceDiv" style="display: none">
                            <div class="klarna_box_bottom_title">{{lang.reference}}</div>
                            <input type="text" alt="{{lang.notice_reference}}"
                                name="{{input.reference}}" value="{{value.reference}}"
                                class="Klarna_fullwidth klarna-validate-text" />
                        </div>
                        <div class="klarna_box_bottom_title">{{lang.phone_number}}</div>
                        <input alt="{{lang.notice_phoneNumber_se}}" type="text"
                            name="{{input.phoneNumber}}" value="{{value.phoneNumber}}"
                            class="Klarna_fullwidth klarna-validate-text" /> <br /> <br />
                        <div class="klarna_box_bottom_address" style="display: none">
                            <div class="klarna_box_bottom_address_title">{{lang.delivery_address}}</div>
                            <div class="klarna_box_bottom_address_content"></div>
                        </div>
                        <div class="klarna_additional_information">
                            {{setup.additional_information}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="klarna_box_ilt">
            <div class="klarna_box_ilt_title">{{lang.ilt_title}}</div>
            <div class="klarna_box_iltContents">{{ilt.box}}</div>
        </div>
    </div>
</div>
<input type="hidden" name="{{input.emailAddress}}"
    value="{{value.emailAddress}}" />
<input type="hidden" name="{{input.invoiceType}}"
    value="{{value.invoiceType}}" id="invoiceType" />
<!-- END KLARNA BOX -->
